(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-abd94186"],{"092d":function(t,e,r){},"11e9":function(t,e,r){var n=r("52a7"),a=r("4630"),i=r("6821"),c=r("6a99"),s=r("69a8"),o=r("c69a"),u=Object.getOwnPropertyDescriptor;e.f=r("9e1e")?u:function(t,e){if(t=i(t),e=c(e,!0),o)try{return u(t,e)}catch(t){}if(s(t,e))return a(!n.f.call(t,e),t[e])}},"214f":function(t,e,r){"use strict";var n=r("32e9"),a=r("2aba"),i=r("79e5"),c=r("be13"),s=r("2b4c");t.exports=function(t,e,r){var o=s(t),u=r(c,o,""[t]),h=u[0],l=u[1];i(function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})&&(a(String.prototype,t,h),n(RegExp.prototype,o,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)}))}},"2c21":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"weather"},[r("weatherpage")],1)},a=[],i=(r("cadf"),r("551c"),r("097d"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"weather__weather-wrapper"},[r("div",{staticClass:"weather__weather-header"},[t.current_city?r("h1",[t._v("Погода в горде "+t._s(this.current_city)+" на "),this.weekly?r("span",{attrs:{id:"global-timer"}}):r("span",[t._v("неделю")])]):r("h1",[t._v("Погода на "),this.weekly?r("span",{attrs:{id:"global-timer"}}):r("span",[t._v("неделю")])]),t._l(t.items,function(e){return r("button",{key:e.id,staticClass:"weather__weather-header__button",class:{current:e.current},attrs:{"aria-label":e.city},on:{click:function(r){t._setCurrent(e.id)}}},[t._v(t._s(e.city))])})],2),t._l(t.items,function(e){return r("weatherbycities",t._b({key:e.id,on:{resetCurrent:t._resetCurrent,setActive:t._setActive,resetActive:t._resetActive,setCurrent:function(r){t._setCurrent(e.id)}}},"weatherbycities",e,!1))})],2)}),c=[],s=(r("ac6a"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"weather__weather-wrapper__weather-card",class:{current:t.current,active:t.active,cached:t.cached}},[r("h2",{staticClass:"weather__weather-wrapper__weather-card__city"},[t._v(t._s(this.city))]),t.current?r("button",{staticClass:"weather__weather-wrapper__weather-card__button",on:{click:function(e){return e.stopPropagation(),t._toggleItActive(e)}}},[t._v(t._s(this.label))]):t._e(),this.active?r("div",{staticClass:"weather__weather-wrapper__weather-card__week"},t._l(t.days,function(e){return r("weatherbydays",t._b({key:e.dt,on:{setCurrentDay:function(r){t._setCurrentDay(e.day)}}},"weatherbydays",e,!1))})):t._e()])}),o=[],u=(r("6762"),r("4917"),r("c5f6"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"weather__weather-wrapper__weather-card__week-day",class:{today:this.today},on:{click:function(e){return e.stopPropagation(),t._setCurrentDay(e)}}},[r("h3",{staticClass:"weather__weather-wrapper__weather-card__week-day__header"},[r("span",{staticClass:"date"},[t._v(t._s(this.month))]),r("span",{staticClass:"day"},[t._v(t._s(this.day)+", "+t._s(this.date))]),r("span",{staticClass:"tavr"},[t._v("Средняя t: "+t._s(this.tAvr)+"°")])]),this.active?r("div",{staticClass:"weather__weather-wrapper__weather-card__week-day__hours",class:{active:this.active}},t._l(t.hours,function(e){return r("weatherbyhours",t._b({},"weatherbyhours",e,!1))})):t._e()])}),h=[],l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"weather__weather-wrapper__weather-card__week-day__hour"},[r("span",[r("u",[t._v(t._s(this.weatherDescription))]),t._v(t._s(this.time))]),r("span",[t._v("Облачность: "+t._s(this.clouds)+"%")]),r("img",{attrs:{src:this.weatherIcon,alt:this.weatherDescription,title:this.weatherDescription,width:"50",height:"50"}}),r("b",[t._v(t._s(this.temperature)+"°")])])},d=[],f={name:"weatherbyhours",props:{time:{type:String,default:""},weatherIcon:{type:String,default:""},clouds:{type:Number,default:0},weatherDescription:{type:String,default:""},temperature:{type:Number,default:0}},data:function(){return{}},computed:{},methods:{}},_=f,p=r("2877"),y=Object(p["a"])(_,l,d,!1,null,null,null);y.options.__file="WeatherByHours.vue";var w=y.exports,v={name:"weatherbydays",components:{weatherbyhours:w},props:{id:{type:Number},day:{type:String,default:""},date:{type:Number},month:{type:String,default:""},clouds:{type:Number},weatherToday:{type:Array},active:{type:Boolean,default:!1},today:{type:Boolean,default:!1}},data:function(){return{hours:this.weatherToday}},computed:{active:function(){return this.today},tAvr:function(){var t=0;return this.weatherToday.forEach(function(e){t+=Number(e.temperature)}),Number(t/this.weatherToday.length).toFixed(1)}},methods:{_setCurrentDay:function(){!1===this.today?this.$emit("setCurrentDay",this.day):this.$emit("resetCurrentDay")}}},m=v,g=Object(p["a"])(m,u,h,!1,null,null,null);g.options.__file="WeatherByDays.vue";var b=g.exports,C={name:"weatherbycities",components:{weatherbydays:b},props:{id:{type:Number},city:{type:String,default:""},current:{type:Boolean,default:!1},active:{type:Boolean,default:!1},cacheOn:{type:Boolean,default:!0},cached:{type:Boolean,default:!1}},data:function(){return{days:[]}},created:function(){if(console.log("created",this.city),this.cacheOn&&!this.cached)return this._getForecastData()},updated:function(){if(console.log("updated",this.city),this.cacheOn&&!this.cached)return this._getForecastData()},computed:{label:function(){return this.active?"Свернуть":"Подробнее"}},methods:{_setCurrentDay:function(t){this.days.map(function(e){e.day===t?e.today=!0:e.today=e.active=!1})},_toggleItCurrent:function(){return this.current?this.$emit("resetCurrent"):this.$emit("setCurrent",this.city)},_toggleItActive:function(){this.active?(this.$emit("resetActive"),this.label="Подробнее"):(this._getForecastData(),this.$emit("setActive"),this.label="Свернуть")},_getForecastData:function(){var t=this;console.clear();var e="https://api.openweathermap.org/data/2.5/forecast?id="+this.id+"&cnt=70&APPID=f38105de7433463d32b25c8b566c7ab1",r=new Request(e);"caches"in window.self?(console.log("go 2 cache"),window.caches.open("myWeather").then(function(e){e.match(r).then(function(e){200===e.status&&e.json().then(function(e){return console.log("status 200, отдали из кэша"),t._renderData(e)}).catch(function(t){return!1})}).catch(function(){console.log("no in cache"),t._tryFromNet(r)})}).catch(function(){t._tryFromNet(r)})):this._tryFromNet(r)},_tryFromNet:function(t){var e=this;console.log("go 2 net"),window.fetch(t).then(function(r){return 200===r.status&&(console.log("status 200, отдали из сети"),e._putInCache(t,r.clone()),r.json().then(function(t){return e._renderData(t)})),!1}).catch(function(t){return console.log(t),!1})},_putInCache:function(t,e){var r=this;try{"caches"in window.self&&window.caches.open("myWeather").then(function(n){n.put(t,e).then(function(t){return console.log("Положили в кэш"),r.cached=!0,r.cached}).catch(function(t){return t})})}catch(t){return t}},_renderData:function(t){console.log("рендерим полученные данные для",this.city);var e=t.list;if(e.length<1)return this.days=[];for(var r=[],n=[],a=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],i=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],c=new Date,s=0;s<e.length;s++){var o=1e3*e[s].dt;c.setTime(o);var u=a[c.getDay()],h=i[c.getMonth()],l=c.getDate(),d=e[s].clouds.all,f=0===s;e[s].date=l,r.includes(l)||(r.push(l),n.push({id:o,date:l,day:u,month:h,clouds:d,today:f}))}return n.forEach(function(t){var r=e.filter(function(e){return e.date===t.date});r.forEach(function(t){t.clouds=t.clouds.all;var e=1e3*t.dt;c.setTime(e),t.time=c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),t.temperature=Number(t.main.temp-273.15).toFixed(1),t.tMin=Number(Number(t.main.temp_min)-273.15).toFixed(1),t.tMax=Number(Number(t.main.temp_max)-273.15).toFixed(1),t.weatherIcon="//openweathermap.org/img/w/"+t.weather[0].icon+".png",t.weatherDescription=t.weather[0].description,t.wind=t.wind.speed,delete t.dt_txt,delete t.dt,delete t.weather,delete t.sys,delete t.wind,delete t.rain,delete t.main}),t.weatherToday=r}),this.days=n,!0}}},N=C,S=Object(p["a"])(N,s,o,!1,null,null,null);S.options.__file="WeatherByCities.vue";var L=S.exports,A={name:"weatherpage",components:{weatherbycities:L},props:{weekly:{type:Boolean,default:!0}},data:function(){return{items:[{id:524901,city:"Москва",current:!1,active:!1},{id:498817,city:"Санкт-Петербург",current:!1,active:!1},{id:1486209,city:"Екатеренбург",current:!1,active:!1}]}},computed:{current_city:{get:function(){var t=this.items.filter(function(t){return!0===t.current});return t.length>0&&t[0].city}}},methods:{_setCurrent:function(t){this.items.map(function(e){e.id===(t||e.city===t)?e.current=!0:e.current=e.active=!1})},_setActive:function(){this.items.map(function(t){!0===t.current?t.active=!0:t.active=!1})},_resetActive:function(){return this.items.forEach(function(t){t.active=!1}),this},_resetCurrent:function(){return this.items.forEach(function(t){t.current=t.active=!1}),this}}},D=function(){var t=document.querySelector("#global-timer");if(t){var e=new Date,r=e.toLocaleTimeString();t.innerHTML=r}};window.setInterval(D,1e3);var I=A,T=(r("50b0"),Object(p["a"])(I,i,c,!1,null,null,null));T.options.__file="Weather.vue";var E=T.exports,x={name:"view_weatherpage",components:{weatherpage:E}},k=x,F=Object(p["a"])(k,n,a,!1,null,null,null);F.options.__file="view_Weather.vue";e["default"]=F.exports},4917:function(t,e,r){r("214f")("match",1,function(t,e,r){return[function(r){"use strict";var n=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,n):new RegExp(r)[e](String(n))},r]})},"50b0":function(t,e,r){"use strict";var n=r("092d"),a=r.n(n);a.a},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"5dbc":function(t,e,r){var n=r("d3f4"),a=r("8b97").set;t.exports=function(t,e,r){var i,c=e.constructor;return c!==r&&"function"==typeof c&&(i=c.prototype)!==r.prototype&&n(i)&&a&&a(t,i),t}},6762:function(t,e,r){"use strict";var n=r("5ca1"),a=r("c366")(!0);n(n.P,"Array",{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")("includes")},"8b97":function(t,e,r){var n=r("d3f4"),a=r("cb7c"),i=function(t,e){if(a(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return i(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:i}},9093:function(t,e,r){var n=r("ce10"),a=r("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,a)}},aa77:function(t,e,r){var n=r("5ca1"),a=r("be13"),i=r("79e5"),c=r("fdef"),s="["+c+"]",o="​",u=RegExp("^"+s+s+"*"),h=RegExp(s+s+"*$"),l=function(t,e,r){var a={},s=i(function(){return!!c[t]()||o[t]()!=o}),u=a[t]=s?e(d):c[t];r&&(a[r]=u),n(n.P+n.F*s,"String",a)},d=l.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(h,"")),t};t.exports=l},ac6a:function(t,e,r){for(var n=r("cadf"),a=r("0d58"),i=r("2aba"),c=r("7726"),s=r("32e9"),o=r("84f2"),u=r("2b4c"),h=u("iterator"),l=u("toStringTag"),d=o.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},_=a(f),p=0;p<_.length;p++){var y,w=_[p],v=f[w],m=c[w],g=m&&m.prototype;if(g&&(g[h]||s(g,h,d),g[l]||s(g,l,w),o[w]=d,v))for(y in n)g[y]||i(g,y,n[y],!0)}},c5f6:function(t,e,r){"use strict";var n=r("7726"),a=r("69a8"),i=r("2d95"),c=r("5dbc"),s=r("6a99"),o=r("79e5"),u=r("9093").f,h=r("11e9").f,l=r("86cc").f,d=r("aa77").trim,f="Number",_=n[f],p=_,y=_.prototype,w=i(r("2aeb")(y))==f,v="trim"in String.prototype,m=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():d(e,3);var r,n,a,i=e.charCodeAt(0);if(43===i||45===i){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+e}for(var c,o=e.slice(2),u=0,h=o.length;u<h;u++)if(c=o.charCodeAt(u),c<48||c>a)return NaN;return parseInt(o,n)}}return+e};if(!_(" 0o1")||!_("0b1")||_("+0x1")){_=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof _&&(w?o(function(){y.valueOf.call(r)}):i(r)!=f)?c(new p(m(e)),r,_):m(e)};for(var g,b=r("9e1e")?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;b.length>C;C++)a(p,g=b[C])&&!a(_,g)&&l(_,g,h(p,g));_.prototype=y,y.constructor=_,r("2aba")(n,f,_)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-abd94186.1eb85685.js.map